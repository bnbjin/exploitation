CC=gcc
OBJECTS= shroud.o
COMPOPT= 
LINKOPT= -lnet -lpcap

.PHONY : all clean 

shroud : shroud.o
	gcc $< $(LINKOPT) -o $@

include $(OBJECTS:.o=.d)

# all : shroud
# 
# 
#$(OBJECTS) : %.o : %.c
#	gcc $(COMPOPT) -c $<

%.d : %.c
	@set -e; rm -f $@; \
	$(CC) -MM $(COMPOPT) $< > $@.$$$$; \
	sed 's,\($*\)\.o[ :]*,\1.o $@ : ,g' < $@.$$$$ > $@; \
	rm -f $@.$$$$

clean :
	rm -f *.d
	rm -f *.o
	rm -f shroud
